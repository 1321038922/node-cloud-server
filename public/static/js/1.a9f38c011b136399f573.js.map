{"version":3,"sources":["webpack:///src/components/radios.vue","webpack:///./src/components/radios.vue?148f","webpack:///./src/components/radios.vue","webpack:///./node_modules/quill-image-extend-module/index.js","webpack:///src/views/writeNote/index.vue","webpack:///./src/views/writeNote/index.vue?5771","webpack:///./src/views/writeNote/index.vue"],"names":["radios","props","options","type","Array","value","String","data","currentValue","this","watch","val","$emit","components_radios","render","_vm","_h","$createElement","_c","_self","staticClass","_l","item","key","_id","directives","name","rawName","expression","attrs","domProps","checked","_q","on","change","$event","_v","_s","staticRenderFns","src_components_radios","__webpack_require__","normalizeComponent","ssrContext","QuillWatch","watcher","active","imageExtendId","ImageExtend","emit","activeId","fileInput","document","querySelector","createElement","setAttribute","classList","add","style","display","addEventListener","self","file","files","config","size","sizeError","action","uploadImg","toBase64","body","appendChild","click","imgHandler","container","header","list","script","indent","direction","color","background","font","align","vue_quill_editor","register","[object Object]","quill","id","Math","random","imgURL","root","pasteHandle","bind","dropHandle","e","preventDefault","cursorIndex","items","types","clipboardData","i","length","kind","match","getAsFile","dataTransfer","reader","FileReader","onload","target","result","insertImg","readAsDataURL","quillLoading","formData","FormData","append","editForm","xhr","XMLHttpRequest","open","headers","onreadystatechange","readyState","status","res","JSON","parse","responseText","response","uploadSuccess","success","error","uploadError","upload","onloadstart","uploading","start","onprogress","complete","loaded","total","progress","onerror","onloadend","end","send","insertEmbed","update","setSelection","pro","innerHTML","replace","getSelection","index","getLength","insertText","writeNote","content","title","contentText","category","categories","editorOption","modules","loading","info","toolbar","handlers","image","methods","handleChange","_ref","html","text","substring","getCategory","_this","$axios","get","then","handleSubmit","_this2","console","log","post","code","$message","setTimeout","$router","push","msg","catch","err","created","components","quillEditor","views_writeNote","model","callback","$$v","$set","ref","writeNote_Component","writeNote_normalizeComponent","__webpack_exports__"],"mappings":"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","file":"static/js/1.a9f38c011b136399f573.js","sourcesContent":["<template>\r\n    <div class=\"radios\">\r\n        <label  class=\"radios-label fll\" v-for=\"item in options\" :key=\"item._id\">\r\n            <input type=\"radio\" v-model=\"currentValue\" class=\"radios-item\" :value=\"item._id\">\r\n            <div class=\"radios-title-warp\">\r\n                <span class=\"radios-title\">{{item.name}}</span>\r\n            </div>\r\n        </label>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\n    export default {\r\n        props: {\r\n            options: {\r\n                type: Array\r\n            },\r\n            value: String\r\n        },\r\n        data() {\r\n            return{\r\n                currentValue:this.value\r\n            }\r\n        },\r\n        watch: {\r\n            value(val) {\r\n                this.currentValue = val\r\n            },\r\n            currentValue(val) {\r\n                this.$emit('input', val)\r\n                this.$emit('change', val)\r\n            }\r\n        }\r\n    }\r\n</script>\r\n\r\n<style scoped>\r\n.radios-item{\r\n        display: none;\r\n    }\r\n    .radios-title-warp{\r\n        padding: 10px 15px;\r\n        font-size: 12px;\r\n        color: #444;\r\n        font-weight: 400;\r\n        border: 1px solid #d1d1d1;\r\n        border-radius: 4px;\r\n        margin-left: 10px;\r\n\r\n    }\r\n    .radios-item:checked + .radios-title-warp{\r\n        color: #fff;\r\n        background: #409eff;\r\n        margin-left: 10px;\r\n    }\r\n</style>\n\n\n// WEBPACK FOOTER //\n// src/components/radios.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"radios\"},_vm._l((_vm.options),function(item){return _c('label',{key:item._id,staticClass:\"radios-label fll\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.currentValue),expression:\"currentValue\"}],staticClass:\"radios-item\",attrs:{\"type\":\"radio\"},domProps:{\"value\":item._id,\"checked\":_vm._q(_vm.currentValue,item._id)},on:{\"change\":function($event){_vm.currentValue=item._id}}}),_vm._v(\" \"),_c('div',{staticClass:\"radios-title-warp\"},[_c('span',{staticClass:\"radios-title\"},[_vm._v(_vm._s(item.name))])])])}))}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-5c34fd9e\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/radios.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-5c34fd9e\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./radios.vue\")\n}\nvar normalizeComponent = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./radios.vue\"\nimport __vue_script__ from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./radios.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-5c34fd9e\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./radios.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-5c34fd9e\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/radios.vue\n// module id = null\n// module chunks = ","/**\r\n *@description 观察者模式 全局监听富文本编辑器\r\n */\r\nexport const QuillWatch = {\r\n    watcher: {},  // 登记编辑器信息\r\n    active: null,  // 当前触发的编辑器\r\n    on: function (imageExtendId, ImageExtend) {  // 登记注册使用了ImageEXtend的编辑器\r\n        if (!this.watcher[imageExtendId]) {\r\n            this.watcher[imageExtendId] = ImageExtend\r\n        }\r\n    },\r\n    emit: function (activeId, type = 1) {  // 事件发射触发\r\n        this.active = this.watcher[activeId]\r\n        if (type === 1) {\r\n            imgHandler()\r\n        }\r\n    }\r\n}\r\n\r\n/**\r\n * @description 图片功能拓展： 增加上传 拖动 复制\r\n */\r\nexport class ImageExtend {\r\n    /**\r\n     * @param quill {Quill}富文本实例\r\n     * @param config {Object} options\r\n     * config  keys: action, headers, editForm start end error  size response\r\n     */\r\n    constructor(quill, config = {}) {\r\n        this.id = Math.random()\r\n        this.quill = quill\r\n        this.quill.id = this.id\r\n        this.config = config\r\n        this.file = ''  // 要上传的图片\r\n        this.imgURL = ''  // 图片地址\r\n        quill.root.addEventListener('paste', this.pasteHandle.bind(this), false)\r\n        quill.root.addEventListener('drop', this.dropHandle.bind(this), false)\r\n        quill.root.addEventListener('dropover', function (e) {\r\n            e.preventDefault()\r\n        }, false)\r\n        this.cursorIndex = 0\r\n        QuillWatch.on(this.id, this)\r\n    }\r\n\r\n    /**\r\n     * @description 粘贴\r\n     * @param e\r\n     */\r\n    pasteHandle(e) {\r\n        // e.preventDefault()\r\n        QuillWatch.emit(this.quill.id, 0)\r\n        let clipboardData = e.clipboardData\r\n        let i = 0\r\n        let items, item, types\r\n\r\n        if (clipboardData) {\r\n            items = clipboardData.items;\r\n\r\n            if (!items) {\r\n                return;\r\n            }\r\n            item = items[0];\r\n            types = clipboardData.types || [];\r\n\r\n            for (; i < types.length; i++) {\r\n                if (types[i] === 'Files') {\r\n                    item = items[i];\r\n                    break;\r\n                }\r\n            }\r\n            if (item && item.kind === 'file' && item.type.match(/^image\\//i)) {\r\n                this.file = item.getAsFile()\r\n                let self = this\r\n                // 如果图片限制大小\r\n                if (self.config.size && self.file.size >= self.config.size * 1024 * 1024) {\r\n                    if (self.config.sizeError) {\r\n                        self.config.sizeError()\r\n                    }\r\n                    return\r\n                }\r\n                if (this.config.action) {\r\n                    // this.uploadImg()\r\n                } else {\r\n                    // this.toBase64()\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    /**\r\n     * 拖拽\r\n     * @param e\r\n     */\r\n    dropHandle(e) {\r\n        QuillWatch.emit(this.quill.id, 0)\r\n        const self = this\r\n        e.preventDefault()\r\n        // 如果图片限制大小\r\n        if (self.config.size && self.file.size >= self.config.size * 1024 * 1024) {\r\n            if (self.config.sizeError) {\r\n                self.config.sizeError()\r\n            }\r\n            return\r\n        }\r\n        self.file = e.dataTransfer.files[0]; // 获取到第一个上传的文件对象\r\n        if (this.config.action) {\r\n            self.uploadImg()\r\n        } else {\r\n            self.toBase64()\r\n        }\r\n    }\r\n\r\n    /**\r\n     * @description 将图片转为base4\r\n     */\r\n    toBase64() {\r\n        const self = this\r\n        const reader = new FileReader()\r\n        reader.onload = (e) => {\r\n            // 返回base64\r\n            self.imgURL = e.target.result\r\n            self.insertImg()\r\n        }\r\n        reader.readAsDataURL(self.file)\r\n    }\r\n\r\n    /**\r\n     * @description 上传图片到服务器\r\n     */\r\n    uploadImg() {\r\n        const self = this\r\n        let quillLoading = self.quillLoading\r\n        let config = self.config\r\n        // 构造表单\r\n        let formData = new FormData()\r\n        formData.append(config.name, self.file)\r\n        // 自定义修改表单\r\n        if (config.editForm) {\r\n            config.editForm(formData)\r\n        }\r\n        // 创建ajax请求\r\n        let xhr = new XMLHttpRequest()\r\n        xhr.open('post', config.action, true)\r\n        // 如果有设置请求头\r\n        if (config.headers) {\r\n            config.headers(xhr)\r\n        }\r\n        if (config.change) {\r\n            config.change(xhr, formData)\r\n        }\r\n        xhr.onreadystatechange = function () {\r\n            if (xhr.readyState === 4) {\r\n                if (xhr.status === 200) {\r\n                    //success\r\n                    let res = JSON.parse(xhr.responseText)\r\n                    self.imgURL = config.response(res)\r\n                    QuillWatch.active.uploadSuccess()\r\n                    self.insertImg()\r\n                    if (self.config.success) {\r\n                        self.config.success()\r\n                    }\r\n                } else {\r\n                    //error\r\n                    if (self.config.error) {\r\n                        self.config.error()\r\n                    }\r\n                    QuillWatch.active.uploadError()\r\n                }\r\n            }\r\n        }\r\n        // 开始上传数据\r\n        xhr.upload.onloadstart = function (e) {\r\n            QuillWatch.active.uploading()\r\n            // let length = (self.quill.getSelection() || {}).index || self.quill.getLength()\r\n            // self.quill.insertText(length, '[uploading...]', { 'color': 'red'}, true)\r\n            if (config.start) {\r\n                config.start()\r\n            }\r\n        }\r\n        // 上传过程\r\n        xhr.upload.onprogress = function (e) {\r\n            let complete = (e.loaded / e.total * 100 | 0) + '%'\r\n            QuillWatch.active.progress(complete)\r\n        }\r\n        // 当发生网络异常的时候会触发，如果上传数据的过程还未结束\r\n        xhr.upload.onerror = function (e) {\r\n            QuillWatch.active.uploadError()\r\n            if (config.error) {\r\n                config.error()\r\n            }\r\n        }\r\n        // 上传数据完成（成功或者失败）时会触发\r\n        xhr.upload.onloadend = function (e) {\r\n            if (config.end) {\r\n                config.end()\r\n            }\r\n        }\r\n        xhr.send(formData)\r\n    }\r\n\r\n    /**\r\n     * @description 往富文本编辑器插入图片\r\n     */\r\n    insertImg() {\r\n        const self = QuillWatch.active\r\n        self.quill.insertEmbed(QuillWatch.active.cursorIndex, 'image', self.imgURL)\r\n        self.quill.update()\r\n        self.quill.setSelection(self.cursorIndex+1);\r\n    }\r\n\r\n    /**\r\n     * @description 显示上传的进度\r\n     */\r\n    progress(pro) {\r\n        pro = '[' + 'uploading' + pro + ']'\r\n        QuillWatch.active.quill.root.innerHTML\r\n            = QuillWatch.active.quill.root.innerHTML.replace(/\\[uploading.*?\\]/, pro)\r\n    }\r\n\r\n    /**\r\n     * 开始上传\r\n     */\r\n    uploading() {\r\n        let length = (QuillWatch.active.quill.getSelection() || {}).index || QuillWatch.active.quill.getLength()\r\n        QuillWatch.active.cursorIndex = length\r\n        QuillWatch.active.quill.insertText(QuillWatch.active.cursorIndex, '[uploading...]', {'color': 'red'}, true)\r\n    }\r\n\r\n    /**\r\n     * 上传失败\r\n     */\r\n    uploadError() {\r\n        QuillWatch.active.quill.root.innerHTML\r\n            = QuillWatch.active.quill.root.innerHTML.replace(/\\[uploading.*?\\]/, '[upload error]')\r\n    }\r\n\r\n    uploadSuccess() {\r\n        QuillWatch.active.quill.root.innerHTML\r\n            = QuillWatch.active.quill.root.innerHTML.replace(/\\[uploading.*?\\]/, '')\r\n    }\r\n}\r\n\r\n/**\r\n * @description 点击图片上传\r\n */\r\nexport function imgHandler() {\r\n    let fileInput = document.querySelector('.quill-image-input');\r\n    if (fileInput === null) {\r\n        fileInput = document.createElement('input');\r\n        fileInput.setAttribute('type', 'file');\r\n        fileInput.classList.add('quill-image-input');\r\n        fileInput.style.display = 'none'\r\n        // 监听选择文件\r\n        fileInput.addEventListener('change', function () {\r\n            let self = QuillWatch.active\r\n            self.file = fileInput.files[0]\r\n            fileInput.value = ''\r\n            // 如果图片限制大小\r\n            if (self.config.size && self.file.size >= self.config.size * 1024 * 1024) {\r\n                if (self.config.sizeError) {\r\n                    self.config.sizeError()\r\n                }\r\n                return\r\n            }\r\n            if (self.config.action) {\r\n                self.uploadImg()\r\n            } else {\r\n                self.toBase64()\r\n            }\r\n        })\r\n        document.body.appendChild(fileInput);\r\n    }\r\n    fileInput.click();\r\n}\r\n\r\n/**\r\n *@description 全部工具栏\r\n */\r\nexport const container = [\r\n    ['bold', 'italic', 'underline', 'strike'],\r\n    ['blockquote', 'code-block'],\r\n    [{'header': 1}, {'header': 2}],\r\n    [{'list': 'ordered'}, {'list': 'bullet'}],\r\n    [{'script': 'sub'}, {'script': 'super'}],\r\n    [{'indent': '-1'}, {'indent': '+1'}],\r\n    [{'direction': 'rtl'}],\r\n    [{'size': ['small', false, 'large', 'huge']}],\r\n    [{'header': [1, 2, 3, 4, 5, 6, false]}],\r\n    [{'color': []}, {'background': []}],\r\n    [{'font': []}],\r\n    [{'align': []}],\r\n    ['clean'],\r\n    ['link', 'image', 'video']\r\n]\r\n\r\n\r\n\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/quill-image-extend-module/index.js\n// module id = null\n// module chunks = ","<template>\r\n    <div class=\"write-note\">\r\n        <div class=\"main-content w1170\">\r\n            <div class=\"title\">\r\n                标题\r\n            </div>\r\n            <div class=\"input-wrap\">\r\n                <el-input v-model=\"formData.title\"></el-input>\r\n            </div>\r\n            <div class=\"title\">\r\n                内容\r\n            </div>\r\n            <quill-editor\r\n            v-model=\"formData.content\"\r\n            ref=\"myQuillEditor\"\r\n            :options=\"editorOption\"\r\n            @change=\"handleChange\"\r\n            >    \r\n        </quill-editor>\r\n                <div class=\"category\">    \r\n                    <div class=\"cleanfix\">                                                                                                                                               \r\n                        <span class=\"fll\"> 分类：</span>\r\n                        <span class=\"fll\">\r\n                            <radios :options=\"categories\" v-model=\"formData.category\"></radios>\r\n                        </span>                                                                      \r\n                    </div>                                      \r\n                </div>\r\n            <el-button class=\"btn\" type=\"primary\" @click=\"handleSubmit\">发布笔记</el-button>\r\n        </div>        \r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport \"quill/dist/quill.core.css\";\r\nimport \"quill/dist/quill.snow.css\";\r\nimport \"quill/dist/quill.bubble.css\";\r\nimport radios from \"@/components/radios\";\r\nimport { quillEditor, Quill } from \"vue-quill-editor\";\r\nimport { container, ImageExtend, QuillWatch } from \"quill-image-extend-module\";\r\n\r\nQuill.register(\"modules/ImageExtend\", ImageExtend);\r\nexport default {\r\n  data() {\r\n    return {\r\n      formData: {\r\n        content: \"\",\r\n        title: \"\",\r\n        contentText: \"\",\r\n        category: \"\"\r\n      },\r\n      categories: [],\r\n      // 富文本框参数设置\r\n      editorOption: {\r\n        modules: {\r\n          ImageExtend: {\r\n            loading: true,\r\n            name: \"img\",\r\n            action: \"https://qiniu.com\",\r\n            response: res => {\r\n              return res.info;\r\n            }\r\n          },\r\n          toolbar: {\r\n            container: container,\r\n            handlers: {\r\n              image: function() {\r\n                QuillWatch.emit(this.quill.id);\r\n              }\r\n            }\r\n          }\r\n        }\r\n      }\r\n    };\r\n  },\r\n  methods: {\r\n    handleChange({ quill, html, text }) {\r\n      this.formData.contentText = text;\r\n      this.formData.contentText =\r\n        this.formData.contentText.substring(0, 200) + \"...\";\r\n    },\r\n    getCategory() {\r\n      this.$axios.get(\"/category\").then(res => {\r\n        this.categories = res.data;\r\n      });\r\n    },\r\n    handleSubmit() {\r\n        console.log(this.formData)\r\n      this.$axios.post(\"/article\", this.formData).then(res => {\r\n          if (res.code == 200) {\r\n            this.$message.success(\"发布成功\");\r\n            setTimeout(() => {\r\n              this.$router.push(\"/index\");\r\n            }, 1000);\r\n          } else {\r\n            this.$message.error(res.msg);\r\n            this.$router.push(\"/index\");\r\n          }\r\n        })\r\n        .catch(err => {\r\n          this.$message.error(res.msg);\r\n        });\r\n    }\r\n  },\r\n  created() {\r\n    this.getCategory();\r\n  },\r\n  components: {\r\n    quillEditor,\r\n    radios\r\n  }\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.main-content {\r\n  margin-top: 30px;\r\n  background: #fff;\r\n  border-radius: 6px;\r\n  padding: 30px;\r\n  box-sizing: border-box;\r\n}\r\n.title {\r\n  font-size: 20px;\r\n  font-weight: 600;\r\n  line-height: 2;\r\n  color: #444;\r\n}\r\n.btn {\r\n  margin-top: 20px;\r\n}\r\n.category {\r\n  color: #409eff;\r\n  font-weight: 500;\r\n  font-size: 16px;\r\n  margin-top: 20px;\r\n}\r\n</style>\r\n<style>\r\n.ql-container {\r\n  min-height: 300px;\r\n}\r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// src/views/writeNote/index.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"write-note\"},[_c('div',{staticClass:\"main-content w1170\"},[_c('div',{staticClass:\"title\"},[_vm._v(\"\\n            标题\\n        \")]),_vm._v(\" \"),_c('div',{staticClass:\"input-wrap\"},[_c('el-input',{model:{value:(_vm.formData.title),callback:function ($$v) {_vm.$set(_vm.formData, \"title\", $$v)},expression:\"formData.title\"}})],1),_vm._v(\" \"),_c('div',{staticClass:\"title\"},[_vm._v(\"\\n            内容\\n        \")]),_vm._v(\" \"),_c('quill-editor',{ref:\"myQuillEditor\",attrs:{\"options\":_vm.editorOption},on:{\"change\":_vm.handleChange},model:{value:(_vm.formData.content),callback:function ($$v) {_vm.$set(_vm.formData, \"content\", $$v)},expression:\"formData.content\"}}),_vm._v(\" \"),_c('div',{staticClass:\"category\"},[_c('div',{staticClass:\"cleanfix\"},[_c('span',{staticClass:\"fll\"},[_vm._v(\" 分类：\")]),_vm._v(\" \"),_c('span',{staticClass:\"fll\"},[_c('radios',{attrs:{\"options\":_vm.categories},model:{value:(_vm.formData.category),callback:function ($$v) {_vm.$set(_vm.formData, \"category\", $$v)},expression:\"formData.category\"}})],1)])]),_vm._v(\" \"),_c('el-button',{staticClass:\"btn\",attrs:{\"type\":\"primary\"},on:{\"click\":_vm.handleSubmit}},[_vm._v(\"发布笔记\")])],1)])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-26af0380\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/views/writeNote/index.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-26af0380\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./index.vue\")\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-26af0380\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../../../node_modules/vue-loader/lib/selector?type=styles&index=1!./index.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./index.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./index.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-26af0380\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./index.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-26af0380\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/views/writeNote/index.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}